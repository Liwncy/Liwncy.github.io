import{j,d as S,r as d,au as T,z as _,av as g,ac as c,k as f,o as D,a as v,m as p,g as I,q as Z,C as q,b as A,I as E,Z as F,D as w,t as J}from"./index-2582b004.js";const K={class:"layui-textarea-wrapper"},L=["rows","cols","value","placeholder","name","disabled","maxlength"],P={key:0,class:"layui-textarea-clear"},Q={key:1,class:"layui-texterea-count"},U=j(S({name:"LayTextarea",__name:"index",props:{modelValue:{},name:{},placeholder:{},disabled:{type:Boolean},showCount:{type:Boolean,default:!1},allowClear:{type:Boolean},cols:{},rows:{},maxlength:{},autosize:{type:[Boolean,Object],default:!1}},emits:["blur","input","update:modelValue","change","focus","clear"],setup(y,{expose:b,emit:H}){const l=y,s=H,n=d(),h=d(!1),z=T(),t=d({width:l.cols?"":"100%",height:l.rows?"":"auto",minHeight:l.rows?"":"100px",maxHeight:l.autosize?"":"auto",transition:"height 0.2s",...z}),x=function(e){const a=e.target;h.value||(s("update:modelValue",a.value),c(()=>s("input",a.value)))},u=e=>{const a=Number(n.value.style.lineHeight)||20;let o=a*e+8;return o+=o%a,o};_(()=>l.modelValue,(e,a)=>{if(g(l.autosize)){const o=(a??"").split(/\n/g).length>(e??"").split(/\n/g).length?"inc":"dec";let i=u((e==null?void 0:e.split(/\n/g).length)??0);if(n.value.clientHeight>i&&o=="dec"||n.value.clientHeight<i&&o=="inc")return;t.value.height=`${i}px`,c(()=>{var r;return n.value.scrollTo(0,((r=n.value)==null?void 0:r.scrollHeight)??0)})}});const C=function(e){s("focus",e)},V=function(e){s("blur",e)},$=e=>{const a=e.target;s("change",a.value)},k=function(){s("update:modelValue",""),s("clear")},B=()=>{h.value=!0},O=e=>{h.value=!1,x(e)},N=f(()=>{var e;return((e=l.modelValue)==null?void 0:e.length)>0}),R=f(()=>{var e;let a=String(((e=l.modelValue)==null?void 0:e.length)??0);return l.maxlength&&(a+="/"+l.maxlength),a}),M=()=>{var e;let a=Number((e=n.value)==null?void 0:e.style.height),o=0,i=0;if(g(l.autosize))if(Object.hasOwn(l.autosize,"maxHeight")){let{minHeight:r,maxHeight:m}=l.autosize;o=r,i=m}else{let{minRow:r,maxRow:m}=l.autosize;o=u(r),i=u(m)}a<o&&(a=o),a>i&&(a=i),c(()=>t.value.height=`${a}px`)};return D(()=>{if(g(l.autosize))if(Object.hasOwn(l.autosize,"maxHeight")){let{minHeight:e,maxHeight:a}=l.autosize;t.value.minHeight=`${e}px`,t.value.height=`${e}px`,t.value.maxHeight=`${a}px`}else{let{minRow:e,maxRow:a}=l.autosize;t.value.minHeight=`${u(e)}px`,t.value.height=`${u(e)}px`,t.value.maxHeight=`${u(a)}px`}l.rows&&(t.value.height=u(l.rows)+"px",t.value.maxHeight=u(l.rows)+"px")}),b({focus:()=>{c(()=>{var e;(e=n.value)==null||e.focus()})},blur:()=>{c(()=>{var e;(e=n.value)==null||e.blur()})}}),(e,a)=>(v(),p("div",K,[I("textarea",{ref_key:"textareaRef",ref:n,class:Z(["layui-textarea",{"layui-textarea-disabled":e.disabled}]),rows:e.rows,cols:e.cols,value:e.modelValue,placeholder:e.placeholder,name:e.name,disabled:e.disabled,maxlength:e.maxlength,style:q(t.value),onCompositionstart:B,onCompositionend:O,onInput:x,onFocus:C,onChange:$,onBlur:V,onMouseenter:M,onMousedown:a[0]||(a[0]=()=>t.value.transition="none"),onMouseup:a[1]||(a[1]=()=>t.value.transition="height 0.2s")},null,46,L),e.allowClear&&N.value?(v(),p("span",P,[A(E(F),{type:"layui-icon-close-fill",onClick:k})])):w("",!0),e.showCount?(v(),p("div",Q,J(R.value),1)):w("",!0)]))}}));export{U as Z};
