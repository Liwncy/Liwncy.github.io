import{j as ee,d as le,k as f,W as ae,r as u,s as te,z as E,ah as z,ai as de,a6 as ue,aj as ie,a as b,m as R,b as s,w as i,g as N,n as oe,f as I,t as ne,c as L,ak as se,I as g,al as M,a8 as O,Z as P,q as A,a0 as ce,am as re,_ as pe,p as me,h as he}from"./index-2582b004.js";import{c as ve}from"./index-c6bb29d7.js";import{V as fe}from"./index-c5655dd7.js";import{y as ye,p as _e}from"./index2-2186d790.js";const Fe={class:"layui-tree-select-content"},Ce=ee(le({name:"LayTreeSelect",__name:"index",props:{modelValue:{},data:{},size:{},multiple:{type:Boolean,default:!1},allowClear:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},placeholder:{},checkStrictly:{type:Boolean,default:!0},collapseTagsTooltip:{type:Boolean,default:!0},minCollapsedNum:{default:3},search:{type:Boolean,default:!1},searchNodeMethod:{type:Function,default:(o,n)=>o.title.includes(n)},lazy:{type:Boolean},load:{},contentClass:{},contentStyle:{type:[Boolean,null,String,Object,Array]},replaceFields:{},defaultExpandAll:{type:Boolean,default:!1},teleportProps:{}},emits:["update:modelValue","change","search"],setup(o,{emit:n}){const a=o,{size:c}=function(e){return{size:f(()=>{const l=ae("LayForm",{});return e.size||l.size||"md"})}}(a),V=u(),y=u(""),_=u(""),F=u([]),p=u(!1),m=u(),B=u(!1),r=n,w=u(),k=u(),C=f(()=>ye(a.replaceFields)),h=f({get:()=>a.multiple&&a.modelValue==null?[]:a.modelValue,set(e){a.modelValue!==e&&(r("update:modelValue",e),r("change",e))}}),v=f({get:()=>a.multiple?a.modelValue:[],set(e){a.multiple&&(r("update:modelValue",e),r("change",e))}}),H=te(),G=f(()=>H.title!=null);E([h,v,V],()=>{const{id:e,title:l}=C.value;if(a.multiple)try{F.value=v.value.map(t=>{let d=z(w.value||a.data,t,C.value);return d&&(d.label=d[l],d.value=d[e],d.closable=!d.disabled),d==null&&(d={label:t,value:t,closable:!0}),d})}catch{throw new Error("v-model / model-value is not an array type")}else{const t=z(w.value||a.data,h.value,C.value);_.value=t?t[l]:""}},{immediate:!0,deep:!0});const K=function(){a.multiple?r("update:modelValue",[]):r("update:modelValue","")},J=e=>{a.multiple||m.value.hide()},W=e=>{if(m.value.hide(),a.checkStrictly)r("update:modelValue",v.value.filter(l=>l!=e));else{const l=z(a.data,e,C.value),t=Y(l);r("update:modelValue",v.value.filter(d=>!t.includes(d)))}},Y=e=>{const l=[],{id:t,children:d}=C.value;return function Q(x,j){j.push(x[t]),x[d]&&x[d].forEach(X=>{Q(X,j)})}(e,l),l},T=f(()=>a.multiple?v.value.length>0:Array.isArray(h.value)?h.value.length:h.value),D=f(()=>T.value?"":a.placeholder),S=e=>{B.value||(r("search",e),y.value=e)},Z=()=>{B.value=!0},$=e=>{B.value=!1,S(e.target.value)};E(y,de(()=>{k.value&&k.value.filter(y.value)},500)),E(p,()=>{p.value||(y.value="")}),E(()=>a.data,()=>{a.data!==V.value&&(V.value=a.data)},{immediate:!0,deep:!0});const U=u(null);return ue(ie,{inputEl:U,setInputEl:e=>{a.search&&(U.value=e)}}),(e,l)=>(b(),R("div",{class:A(["layui-tree-select",{"layui-disabled":e.disabled,"has-content":T.value,"has-clear":e.allowClear}])},[s(re,{ref_key:"dropdownRef",ref:m,disabled:e.disabled,contentClass:e.contentClass,contentStyle:e.contentStyle,teleportProps:e.teleportProps,"click-to-close":!1,onShow:l[6]||(l[6]=t=>p.value=!0),onHide:l[7]||(l[7]=t=>p.value=!1)},{content:i(()=>[N("div",Fe,[s(_e,{ref_key:"treeRef",ref:k,data:V.value,treeOriginData:w.value,"onUpdate:treeOriginData":l[3]||(l[3]=t=>w.value=t),"is-select":!e.multiple,onlyIconControl:!0,"show-checkbox":e.multiple,"check-strictly":e.checkStrictly,selectedKey:h.value,"onUpdate:selectedKey":l[4]||(l[4]=t=>h.value=t),checkedKeys:v.value,"onUpdate:checkedKeys":l[5]||(l[5]=t=>v.value=t),"tail-node-icon":!G.value,replaceFields:C.value,defaultExpandAll:e.defaultExpandAll,lazy:e.lazy,load:e.load,searchNodeMethod:e.searchNodeMethod,onNodeClick:J},{title:i(({data:t})=>[oe(e.$slots,"title",{data:t},()=>[I(ne(t.title),1)])]),_:3},8,["data","treeOriginData","is-select","show-checkbox","check-strictly","selectedKey","checkedKeys","tail-node-icon","replaceFields","defaultExpandAll","lazy","load","searchNodeMethod"])])]),default:i(()=>[e.multiple?(b(),L(se,{key:0,modelValue:F.value,"onUpdate:modelValue":l[0]||(l[0]=t=>F.value=t),size:g(c),"allow-clear":e.allowClear,placeholder:D.value,collapseTagsTooltip:e.collapseTagsTooltip,minCollapsedNum:e.minCollapsedNum,disabledInput:!e.search,inputValue:y.value,onInputValueChange:S,onRemove:W,onClear:K,onKeyupCapture:l[1]||(l[1]=M(O(()=>{},["prevent","stop"]),["delete"])),onKeydownCapture:l[2]||(l[2]=M(O(()=>{},["prevent","stop"]),["enter"]))},{suffix:i(()=>[s(g(P),{type:"layui-icon-triangle-d",class:A({triangle:p.value})},null,8,["class"])]),_:1},8,["modelValue","size","allow-clear","placeholder","collapseTagsTooltip","minCollapsedNum","disabledInput","inputValue"])):(b(),L(ce,{key:1,modelValue:_.value,"allow-clear":e.allowClear,placeholder:D.value,disabled:e.disabled,readonly:!e.search,size:g(c),onClear:K,onInput:S,onCompositionstart:Z,onCompositionend:$},{suffix:i(()=>[s(g(P),{type:"layui-icon-triangle-d",class:A({triangle:p.value})},null,8,["class"])]),_:1},8,["modelValue","allow-clear","placeholder","disabled","readonly","size"]))]),_:3},8,["disabled","contentClass","contentStyle","teleportProps"])],2))}}));const Ve={setup(){const o=u(23),n=u([23]),a=u([{title:"一级1",id:1,field:"name1",children:[{title:"二级1-1 可允许跳转",id:3,field:"name11",href:"https://www.layui.com/",children:[{title:"三级1-1-3",id:23,field:"",children:[{title:"四级1-1-3-1",id:24,field:"",children:[{title:"五级1-1-3-1-1",id:30},{title:"五级1-1-3-1-2",id:31}]}]},{title:"三级1-1-1",id:7,field:"",children:[{title:"四级1-1-1-1 可允许跳转",id:15,href:"https://www.layui.com/doc/"}]},{title:"三级1-1-2",id:8,field:"",children:[{title:"四级1-1-2-1",id:32}]}]},{title:"二级1-2",id:4,spread:!0,children:[{title:"三级1-2-1",id:9},{title:"三级1-2-2",id:10}]},{title:"二级1-3",id:20,field:"",children:[{title:"三级1-3-1",id:21,field:""},{title:"三级1-3-2",id:22,field:""}]}]},{title:"一级2",id:2,children:[{title:"二级2-1",id:5,spread:!0,children:[{title:"三级2-1-1",id:11},{title:"三级2-1-2",id:12}]},{title:"二级2-2",id:6,children:[{title:"三级2-2-1",id:13},{title:"三级2-2-2",id:14}]}]},{title:"一级3",id:16,field:"",children:[{title:"二级3-1",id:17,field:"",fixed:!0,children:[{title:"三级3-1-1",id:18,field:""},{title:"三级3-1-2",id:19,field:""}]},{title:"二级3-2",id:27,field:"",children:[{title:"三级3-2-1",id:28,field:""},{title:"三级3-2-2",id:29,field:""}]}]}]);return{value1:o,value2:n,data:a}}};const q=o=>(me("data-v-4ddd3dad"),o=o(),he(),o),we=q(()=>N("p",{class:"header-title"},"下拉树",-1)),Ee=q(()=>N("p",{class:"header-describe"},"二维条码 / 二维码（2-dimensional bar code）是用某种特定的几何图形按一定规律在平面（二维方向上）分布的、黑白相间的、记录数据符号信息的图形.",-1));function ge(o,n,a,c,V,y){const _=fe,F=Ce,p=ve;return b(),R("div",null,[s(_,null,{default:i(()=>[we,Ee]),_:1}),s(p,{fluid:!0,style:{padding:"10px","padding-top":"0px"}},{default:i(()=>[s(_,null,{title:i(()=>[I("基础案例")]),default:i(()=>[s(F,{modelValue:c.value1,"onUpdate:modelValue":n[0]||(n[0]=m=>c.value1=m),data:c.data},null,8,["modelValue","data"])]),_:1}),s(_,null,{title:i(()=>[I("进阶使用")]),default:i(()=>[s(F,{modelValue:c.value2,"onUpdate:modelValue":n[1]||(n[1]=m=>c.value2=m),data:c.data,multiple:""},null,8,["modelValue","data"])]),_:1})]),_:1})])}const xe=pe(Ve,[["render",ge],["__scopeId","data-v-4ddd3dad"]]);export{xe as default};
