import{W as $,j as g,d as h,s as j,r as l,at as E,k as t,o as M,ab as R,a as s,m as i,C as V,I as m,D as W,c as q,Z as w,n as A,q as D}from"./index-2582b004.js";const H=Symbol("layui-avatar"),I=()=>$(H,{}),L=["src","alt"],O=g(h({name:"LayAvatar",__name:"index",props:{src:{},size:{default:"md"},radius:{type:Boolean,default:!1},icon:{default:"layui-icon-username"},alt:{},autoFixSize:{type:Boolean,default:!0},fallback:{}},setup(y){const n=y,p=j(),c=l(null),o=l(null),v=l({}),u=l(),{size:k,radius:z,autoFixSize:x}=E(n),d=l(!1),S=t(()=>["layui-avatar",b.value?"layui-avatar-radius":"",f.value?`layui-avatar-${f.value}`:""]),e=I(),f=t(()=>(e==null?void 0:e.size)??k.value),b=t(()=>(e==null?void 0:e.radius)??z.value),B=t(()=>(e==null?void 0:e.autoFixSize)??x.value);M(()=>{B.value&&o.value&&(u.value=new ResizeObserver(a=>{for(const r of a)if(r.contentBoxSize){const C=c.value.offsetWidth,F=Math.min(C/r.contentBoxSize[0].inlineSize*.9,1);v.value={transform:`translate(-50%, -50%) scale(${F})`}}}),u.value.observe(o.value))});const _=a=>{n.fallback&&!d.value&&(a.target.src=n.fallback),d.value=!0};return R(()=>{var a;(a=u.value)==null||a.disconnect()}),(a,r)=>(s(),i("span",{ref_key:"avatar",ref:c,class:D(S.value)},[a.src?(s(),i("img",{key:0,src:a.src,alt:a.alt,onError:_},null,40,L)):(s(),i("span",{key:1,ref_key:"avatarText",ref:o,class:"layui-avatar-text",style:V(v.value)},[m(p).default?W("",!0):(s(),q(m(w),{key:0,type:a.icon},null,8,["type"])),A(a.$slots,"default")],4))],2))}}));export{O as H,H as o};
