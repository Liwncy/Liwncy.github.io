import{j as H,d as J,k as b,W as R,r as z,X as B,Y as d,z as W,a as N,m as k,R as F,I as v,c as S,w as _,b as I,Z as C,$ as L,g as X,a0 as K,t as P,D as Q,a1 as O}from"./index-2582b004.js";const U=100,ee=600,T={beforeMount(x,h){const t=h.value,{interval:V=U,delay:m=ee}=O(t)?{}:t;let i,o;const s=()=>O(t)?t():t.handler(),r=()=>{o&&(clearTimeout(o),o=void 0),i&&(clearInterval(i),i=void 0)};x.addEventListener("mousedown",c=>{c.button===0&&(r(),s(),document.addEventListener("mouseup",()=>r(),{once:!0}),o=setTimeout(()=>{i=setInterval(()=>{s()},V)},m))})}},ae=["position","size"],te={class:"layui-input-number-input"},le={key:0,class:"layui-input-number-indicator"},ie=H(J({name:"LayInputNumber",__name:"index",props:{modelValue:{default:0},name:{},disabled:{type:Boolean,default:!1},disabledInput:{type:Boolean,default:!1},size:{},step:{default:1},stepStrictly:{type:Boolean,default:!1},precision:{},position:{},min:{default:-1/0},max:{default:1/0},indicator:{default:""}},emits:["update:modelValue","change","input","focus","blur"],setup(x,{emit:h}){const t=x,{size:V}=function(e){return{size:b(()=>{const a=R("LayForm",{});return e.size||a.size||"md"})}}(t),m=z(!0),i=h;let o=z(t.modelValue),s=z(null);const r=e=>{const{max:a,min:l,step:n,stepStrictly:y,precision:g}=t;if(l>a)throw new Error("input-number: props.max应大于props.min");let u=Number(e);return e==null||Number.isNaN(u)?null:(y&&(u=c(Math.round(u/n)*n,g)),B(g)||(u=c(u,g)),(u>a||u<l)&&(u=u>a?a:l,i("update:modelValue",u)),u)},c=(e,a)=>{if(a||(a=j.value),a===0)return Math.round(e);let l=String(e);const n=l.indexOf(".");if(n===-1||!l.replace(".","").split("")[n+a])return e;const y=l.length;return l.charAt(y-1)==="5"&&(l=`${l.slice(0,Math.max(0,y-1))}6`),Number.parseFloat(Number(l).toFixed(a))},$=e=>{if(!e)return 0;const a=e.toString(),l=a.indexOf(".");let n=0;return l!==-1&&(n=a.length-l-1),n},w=(e,a=1)=>d(e)?c(e+t.step*a):o.value,j=b(()=>{const e=$(t.step);return B(t.precision)?Math.max($(t.modelValue),e):(e>t.precision&&console.warn("input-number: props.precision不应小于props.step的小数位"),t.precision)}),p=b(()=>{if(s.value!==null)return s.value;let e=o.value;if(e==null)return"";if(d(e)){if(Number.isNaN(e))return"";B(t.precision)||(e=e.toFixed(t.precision))}return e});W(()=>t.modelValue,e=>{const a=r(s.value),l=r(e);d(a)||a&&a===l||(o.value=l,s.value=null)},{immediate:!0});const f=(e,a=!0)=>{const l=o.value,n=r(e);a?l!==n&&(s.value=null,i("update:modelValue",n),i("change",n,l),o.value=n):i("update:modelValue",n)},D=e=>{s.value=e;const a=e===""?null:Number(e);f(a,!1)},A=e=>{const a=e===""?null:Number(e);(d(a)&&!Number.isNaN(a)||e==="")&&f(a),s.value=null},Y=e=>{i("blur",e),m.value=!0},Z=e=>{i("focus",e),m.value=!1},q=()=>{if(t.disabledInput||M.value)return;const e=Number(p.value)||0,a=w(e);f(a)},G=()=>{if(t.disabledInput||E.value)return;const e=Number(p.value)||0,a=w(e,-1);f(a)},E=b(()=>!!t.disabled||t.min!==-1/0&&d(t.modelValue)&&Number(t.min)>=t.modelValue),M=b(()=>!!t.disabled||t.max!==1/0&&d(t.modelValue)&&Number(t.max)<=t.modelValue);return(e,a)=>(N(),k("div",{class:"layui-input-number",position:e.position,size:v(V)},[F((N(),S(L,{size:"lg",disabled:E.value,class:"layui-control-btn layui-subtraction-btn"},{default:_(()=>[I(v(C),{type:e.position==="right"?"layui-icon-down":"layui-icon-subtraction"},null,8,["type"])]),_:1},8,["disabled"])),[[v(T),G]]),X("div",te,[I(K,{title:`${p.value}${e.indicator}`,max:e.max,min:e.min,name:e.name,modelValue:p.value,readonly:e.disabledInput||e.disabled,disabled:e.disabledInput||e.disabled,onInput:D,onChange:A,onBlur:Y,onFocus:Z,type:"number"},null,8,["title","max","min","name","modelValue","readonly","disabled"]),m.value&&e.indicator?(N(),k("div",le,P(`${p.value}${e.indicator}`),1)):Q("",!0)]),F((N(),S(L,{size:"lg",disabled:M.value,class:"layui-control-btn layui-addition-btn"},{default:_(()=>[I(v(C),{type:e.position==="right"?"layui-icon-up":"layui-icon-addition"},null,8,["type"])]),_:1},8,["disabled"])),[[v(T),q]])],8,ae))}}));export{ie as s};
